
<div class="modal" ng-controller="KisBpmConditionExpressionPopupCtrl">
	<div class="modal-dialog modal-wide">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
					aria-hidden="true" ng-click="close()">&times;</button>
				<h2 translate>PROPERTY.SEQUENCEFLOW.CONDITION.TITLE</h2>
			</div>
			<div class="modal-body">

				<div class="detail-group clearfix">
					
					<div class="form-group clearfix">
						<div class="col-xs-12">
							<div class="col-xs-12">
								<label class="radio-inline"> <input
									ng-model="conditionExpression.type" type="radio"
									name="condition-type" id="condition-type-field" value="field">
									<span class="label label-primary"">{{'PROPERTY.SEQUENCEFLOW.CONDITION.TYPE.FIELD.STATIC' |
									translate}}</span>
									
								</label> <label class="radio-inline"> <input
									ng-model="conditionExpression.type" type="radio"
									name="condition-type" id="condition-type-custom" value="custom">
									<span class="label label-primary"">{{'PROPERTY.SEQUENCEFLOW.CONDITION.TYPE.CUSTOM.STATIC' |
									translate}}</span>
									
								</label>
							</div>
						</div>
					</div>

					<div class="form-group clearfix">
						<div class="col-xs-12"
							ng-if="conditionExpression.type == 'custom'">
							<div class="col-xs-10">
								<textarea class="form-control"
									ng-model="conditionExpression.value"
									style="width: 90%; height: 100%; max-width: 100%; max-height: 100%; min-height: 100px" />
							</div>
						</div>

						<div class="col-xs-12"
							ng-if="conditionExpression.type == 'field'">
							<div class="col-xs-6">
								<div ng-if="translationsRetrieved" class="default-grid"
									ng-grid="gridOptions"></div>
								<div class="pull-right">
									<span class="text-danger" ng-if="bizFieldData == undefined || bizFieldData.length == 0">{{'PROPERTY.SEQUENCEFLOW.CONDITION.FIELD.CONFIG.EMPTY' | translate}}</span>
									<div class="btn-group">
										<a class="btn btn-icon" rel="tooltip" ng-disabled="bizFieldData == undefined || bizFieldData.length == 0"
											data-title="{{'ACTION.ADD' | translate}}"
											data-placement="bottom" data-original-title="" title=""
											ng-click="addNewFieldCondition()"><i
											class="glyphicon glyphicon-plus" ></i></a> 
										<a class="btn btn-icon" rel="tooltip" ng-disabled="bizFieldData == undefined || bizFieldData.length == 0"
											data-title="{{'ACTION.REMOVE' | translate}}"
											data-placement="bottom" data-original-title="" title=""
											ng-click="removeFiledCondition()"><i
											class="glyphicon glyphicon-minus" ng-disabled="bizFieldData == undefined || bizFieldData.length == 0"></i></a>
									</div>
								</div>
							</div>

							<div class="col-xs-6" ng-show="selectedBizFieldConditions.length > 0">
								<div class="form-group">
	            			   		<label for="fieldName">{{'PROPERTY.SEQUENCEFLOW.CONDITION.TABLE.COL.FILED' | translate}}</label>
	            			   		<select id="fieldName" class="form-control" 
	            			   				ng-model="selectedBizFieldConditions[0].name"
	            			   				ng-change="fieldChanged()">
	            			   				<option ng-repeat="d in bizFieldData" value="{{d.name}}">{{d.label}}</option>  
	                                </select>
	            				</div>
	            				<div class="form-group">
	            					<div class="well">
									  <strong>{{'PROPERTY.SEQUENCEFLOW.CONDITION.TYPE.FIELD.ITEM.DESC' | translate}}：</strong> {{selectedBizFieldConditions[0].description == undefinded ? '无' : selectedBizFieldConditions[0].description}}
									</div>
	            				</div>
	            				<div class="form-group">
	            			   		<label for="fieldOperator">{{'PROPERTY.SEQUENCEFLOW.CONDITION.TABLE.COL.OPERATOR' | translate}}</label>
	            			   		<select id="fieldOperator" class="form-control" 
	            			   				ng-model="selectedBizFieldConditions[0].operator" 
	            			   				ng-change="fieldOperatorChanged()">
	            			   				<option ng-repeat="d in selectedBizFieldConditions[0].operators" value="{{d.key}}">{{d.value}}</option>  
	                                </select>
	            				</div>
	            				<div class="form-group" ng-show="selectedBizFieldConditions[0].type == 'string'">
	            			   		<label for="fieldValue">{{'PROPERTY.SEQUENCEFLOW.CONDITION.TABLE.COL.VALUE' | translate}}</label>
            			   			<input id="fieldValue" class="form-control" type="text" ng-model="selectedBizFieldConditions[0].value"  />
	            				</div>
	            				
	            				<div class="form-group" ng-show="selectedBizFieldConditions[0].type == 'number'">
	            			   		<label for="fieldValue">{{'PROPERTY.SEQUENCEFLOW.CONDITION.TABLE.COL.VALUE' | translate}}</label>
            			   			<input id="fieldValue" class="form-control" type="number" ng-model="selectedBizFieldConditions[0].value"  />
	            				</div>
	            				
	            				<div class="form-group" ng-show="selectedBizFieldConditions[0].type == 'enum'">
	            					<label class="checkbox-inline" ng-repeat="enumValue in selectedBizFieldConditions[0]['values']">
									  <input type="checkbox" ng-change="fieldEnumChanged()" ng-model="enumValue['selected']" value="{{enumValue.['key']}}"> {{enumValue['value']}}
									</label>
	            				</div>
	            				
	            				<div class="form-group">
	            				
	            					<label class="radio-inline">
            				   			<input id="andOr_and" type="radio" ng-model="selectedBizFieldConditions[0].andOr" value="&&"> 
            				   			<span class="label label-success">{{'PROPERTY.SEQUENCEFLOW.CONDITION.VARIABLE.AND' | translate}}</span>
            				   		</label>
            				   		<label class="radio-inline">
            				   			<input id="andOr_or" type="radio" ng-model="selectedBizFieldConditions[0].andOr" value="||" > 
            				   			<span class="label label-danger">{{'PROPERTY.SEQUENCEFLOW.CONDITION.VARIABLE.OR' | translate}}</span>
            				   			
            				   		</label>
            				   		
            					</div>
            					
            				</div>
	            			
	            			<div class="col-xs-6" ng-show="selectedBizFieldConditions.length == 0">
								<div class="muted no-property-selected" translate>PROPERTY.SEQUENCEFLOW.CONDITION.FIELD.EMPTY</div>
							</div>
							</div>
							
							
							
						</div>
					</div>

				</div>
				<div class="modal-footer">
					<button ng-click="close()" class="btn btn-primary" translate>ACTION.CANCEL</button>
					<button ng-click="save()" class="btn btn-primary" translate>ACTION.SAVE</button>
				</div>
			</div>
		</div>
	</div>